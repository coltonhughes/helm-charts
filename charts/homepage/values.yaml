# Default values for homepage.
# This is a YAML-formatted file.

replicaCount: 1
deploymentStrategy:
  type: RollingUpdate

image:
  repository: ghcr.io/gethomepage/homepage
  pullPolicy: Always
  tag: "latest"

container:
  env:
    HOMEPAGE_ALLOWED_HOSTS: homepage.example.com
  command: []
  args: []

containerPorts:
  - name: http
    containerPort: 3000
    protocol: TCP

imagePullSecrets: []
nameOverride: ""
fullnameOverride: ""

serviceAccount:
  create: true
  automount: true
  annotations: {}
  name: ""

enableRbac: true

podAnnotations: {}
podLabels: {}
podSecurityContext: {}
securityContext: {}

service:
  type: ClusterIP
  port: 3000
  protocol: TCP
  targetPort: http
  loadBalancerIP: ""
  annotations: {}
  ports: []

ingress:
  enabled: true
  className: nginx
  annotations:
    gethomepage.dev/enabled: "true"
    gethomepage.dev/name: "Homepage"
    gethomepage.dev/description: "Dynamically Detected Homepage"
    gethomepage.dev/group: "Cluster Management"
    gethomepage.dev/icon: "homepage.png"
  hosts:
    - host: homepage.example.com
      paths:
        - path: /
          pathType: Prefix
  tls: []

# HTTPRoute configuration for Gateway API
# Please refer to https://gateway-api.sigs.k8s.io/reference/spec/#gateway.networking.k8s.io/v1.HTTPRoute
httpRoute:
  enabled: false
  annotations: {}
  labels: {}
  parentRefs: []
  hostnames: []
  rules: []

resources: {}
livenessProbe: {}
readinessProbe: {}
initContainers: []
initContainersTemplate: ""
extraContainers: []
extraContainersTemplate: ""

autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 100
  targetCPUUtilizationPercentage: 80

volumes:
  - name: homepage-config
    configMap:
      name: '{{ include "common.fullname" . }}'
  - name: logs
    emptyDir: {}

volumeMounts:
  - mountPath: /app/config/custom.js
    name: homepage-config
    subPath: custom.js
  - mountPath: /app/config/custom.css
    name: homepage-config
    subPath: custom.css
  - mountPath: /app/config/bookmarks.yaml
    name: homepage-config
    subPath: bookmarks.yaml
  - mountPath: /app/config/docker.yaml
    name: homepage-config
    subPath: docker.yaml
  - mountPath: /app/config/kubernetes.yaml
    name: homepage-config
    subPath: kubernetes.yaml
  - mountPath: /app/config/services.yaml
    name: homepage-config
    subPath: services.yaml
  - mountPath: /app/config/settings.yaml
    name: homepage-config
    subPath: settings.yaml
  - mountPath: /app/config/widgets.yaml
    name: homepage-config
    subPath: widgets.yaml
  - mountPath: /app/config/logs
    name: logs

gpu:
  enabled: false
  type: ""
  runtimeClassName: ""
  resources: {}

persistence:
  enabled: false
  storageClass: ""
  existingClaim: ""
  claimName: ""
  accessMode: ReadWriteOnce
  size: 1Gi
  mountPath: /config
  subPath: ""
  name: config

nodeSelector: {}
tolerations: []
affinity: {}

config:
  kubernetes:
    mode: cluster
    gateway: true
  settings: {}
  customCSS: ""
  customJS: ""
  bookmarks: []
  services: []
  widgets: []
  # Widget fields can reference Secrets with this shape:
  # <field>:
  #   secretRef:
  #     name: homepage-secrets
  #     key: some-key
  #     namespace: apps # optional, defaults to .Release.Namespace
  #
  # Example widgets using secretRef:
  # - diskstation:
  #     type: diskstation
  #     url: http://diskstation.host.or.ip:port
  #     username: username
  #     password:
  #       secretRef:
  #         name: homepage-secrets
  #         key: diskstation-password
  #     volume: volume_1 # optional
  # - gitea:
  #     type: gitea
  #     url: http://gitea.host.or.ip:port
  #     key:
  #       secretRef:
  #         name: homepage-secrets
  #         key: gitea-api-token
  docker: {}
